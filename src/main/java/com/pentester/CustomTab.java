package com.pentester;

import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.Event;
import javafx.scene.control.Tab;
import javafx.scene.control.TextField;
import javafx.scene.input.ContextMenuEvent;
import javafx.scene.input.MouseButton;

public class CustomTab extends Tab
{
    private Tab myTab;

    private TextField editableTitle;
    public CustomTab(String title)
    {
        super(title);
        myTab = this;
    }

    public CustomTab(String title, boolean editable)
    {
        myTab = this;

        editableTitle = new TextField(title);
        editableTitle.setEditable(false);
        editableTitle.addEventFilter(ContextMenuEvent.CONTEXT_MENU_REQUESTED, Event::consume);

        editableTitle.setOnMouseClicked(event -> {
            if(event.getButton().equals(MouseButton.PRIMARY) && event.getClickCount() == 2)
            {
                editableTitle.setEditable(true);
            }
            else
            {
                myTab.getTabPane().getSelectionModel().select(myTab);
            }
        });

        editableTitle.focusedProperty().addListener(new ChangeListener<Boolean>() {
            @Override
            public void changed(ObservableValue<? extends Boolean> observableValue, Boolean oldValue, Boolean newValue)
            {
                if(oldValue)
                {
                    editableTitle.setEditable(false);
                }
            }
        });

        this.setGraphic(editableTitle);
    }
}
